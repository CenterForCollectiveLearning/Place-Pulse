{% extends "base.html" %}
{% set active_page = "signin" %}

{% block css %}
<link rel="stylesheet" href="/static/css/bootstrap/bootstrap.css"/>
<link rel="stylesheet" href="/static/css/font-awesome/font-awesome.css"/>
<link rel="stylesheet" href="/static/css/style.css"/>
<link rel="stylesheet" href="/static/css/main.css"/>
{% endblock %}

{% block body %}
<div class="hero-unit">
    <div class="ac">
      <h1>Welcome to Place Pulse</h1><br />
      <hr />
    </div>
  </div>
<div class="row pricing">
    <div class="span5 offset1">
      <div class="well">
        <h2>Sign In</h2>
        <ul>
          <li></li>
          <li class="ac">
            <div class="fb-login-button" data-scope="email" data-redirect-uri="http://localhost:8000/finished">
              <a href="{{ fb_login_link }}">
                <img src="/static/img/button_fb.jpg" />
              </a>
            </div>
          </li>
          <li class="ac"><img src="/static/img/button_browserid.png" class="browserIDLoginButton" /></li>
        </ul>          
        <p>Connecting with Facebook requires an existing account with Facebook.</p>
        <p>BrowserID is a secure user authentication service run by Mozilla and requires only an email and a password to sign in.</p>
      </div>
    </div>
    <div class="span5">
      <div class="well">
        <h2>Create an Account</h2>
        <ul>
          <li>&#10004; Create your own studies</li>
          <li>&#10004; View and browse results</li>
        </ul>
        <p>To create an account with Place Pulse, sign in with an existing Facebook account.</p>
        <p>Alternatively, create a new Place Pulse account by signing up for BrowserID. BrowserID is a secure user authentication service run by Mozilla and requires only an email and a password to get started.</p><p>(Opens in a new window)</p>
        <hr />
        <p class="ac">
          <a class="browserIDLoginButton btn btn-large" href="#">Create an account &raquo;</a>
        </p>
      </div>
    </div>
  </div>

  </div>
{% endblock %}

{% block footer %}
{{ super() }}
{% endblock %}

{% block js %}
<script src="/static/js/libs/jquery-1.7.2.min.js"></script>
<script src="/static/js/libs/bootstrap.js"></script>
<script src="/static/js/libs/jquery.isotope.min.js"></script>
<script src="/static/js/libs/jquery.touchSwipe.js"></script>
<script src="/static/js/base_ui.js"></script>
<script src="/static/js/functions.min.js"></script>
<script src="https://browserid.org/include.js" type="text/javascript"></script>
  <script>
    function doBrowserID() {
      navigator.id.getVerifiedEmail(function(assertion) {
          if (assertion) {
              // This code will be invoked once the user has successfully
              // selected an email address they control to sign in with.
          $.ajax({
            type: 'POST',
            url: '{{ browserid_login_link }}',
            data: {
              assertion: assertion
            },
            success: function(e) {
              // Login success!
              if (e.error) {
                alert(e.error_description);
                return;
              }
              window.location = e.next;
            }
          });
    
          } else {
              // something went wrong!  the user isn't logged in.
          }
      });
  }
  
  function init() {
    $('.browserIDLoginButton').click(doBrowserID);
  }
  
  $(document).ready(init);
  </script>
{% endblock %}